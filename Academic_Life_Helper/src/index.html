<html ng-app="app" ng-controller="indexController">
  <head>
    <title>Academic Life Helper</title>
    <meta charset="utf-8" />
    <!-- Web fonts -->
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro" rel="stylesheet">
    <link href='http://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>
    <!-- Styles -->
    <link rel="stylesheet" ng-href="../bower_components/angular-material/angular-material.css">
    <link rel="stylesheet" ng-href="src/css/{{ selectedSheet }}.css">
    <link rel="stylesheet" ng-href="src/css/fixed-style.css">
    <link rel="stylesheet" ng-href="src/css/bootstrap.css">
    <!-- Angular Imports -->
    <script src="../bower_components/angular/angular.js"></script>
    <script src="../bower_components/angular-animate/angular-animate.js"></script>
    <script src="../bower_components/angular-aria/angular-aria.js"></script>
    <script src="../bower_components/angular-messages/angular-messages.js"></script>
    <script src="../bower_components/angular-material/angular-material.js"></script>
    <script src="src/js/app.module.js"></script>

    <!-- Services -->
    <script src="src/js/indexService.js"></script>
    <script src="src/js/activityService.js"></script>

    <!-- Factories -->
    <script src="src/js/personFactory.js"></script>
    <script src="src/js/activityFactory.js"></script>

    <!-- Controllers -->
    <script src="src/js/greetingController.js"></script>
    <script src="src/js/indexController.js"></script>
    <script src="src/js/activitiesController.js"></script>

    <script type="text/javascript">
    //<![CDATA[

    if (screen.width <= 699 || navigator.userAgent.match("iPad")) {
      document.location = "/src/mobile.html";
    }

    //]]>
    </script>

  </head>
  <body ng-controller="greetingController" >
    <div ng-controller="activitiesController" style="overflow: hidden" class="container-fluid">
      <div class="max-height" layout="row">
          <div hide-sm flex="25" class="max-height" >
            <div class="body-container left-panel">
              <div ng-class="selectedSheet === 'index-dark' ? 'style-selector color-type1 selected-style' : 'style-selector color-type1'" ng-click="changeCss('index-dark')"></div>
              <div ng-class="selectedSheet === 'index-coffee' ? 'style-selector color-type2 selected-style' : 'style-selector color-type2'" ng-click="changeCss('index-coffee')"></div>
              <div ng-class="selectedSheet === 'index-light' ? 'style-selector color-type3 selected-style' : 'style-selector color-type3'" ng-click="changeCss('index-light')"></div>

              <div ng-if="userName.name === ''">
                <span class='input-msg'>Input Your Name Here: </span>
                <input style="margin-top: 15px" class='name-input' type="text" id="user_name" required />
                <button class='add-user-btn' ng-click="addUser()" >Add Name</button>
              </div>

              <h2 class="greeting-msg"><span class="greeting-span">{{ userName.name }}</span></h2>

              <div >
                <ul class="activity-list-area">
                  <li style="cursor: pointer" ng-class="selected_activity_id === activity._id ? 'activity-list-item selected-item' : 'activity-list-item'" ng-click="selectActivity(activity._id)" ng-repeat="activity in activities">
                    <div ng-class="selected_activity_id === activity._id ? 'activity-list-icon-selected' : 'activity-list-icon'"></div>
                    <span>{{ activity.title }}</span>
                    <div ng-click="removeActivity(activity._id)" class="delete-activity"></div>
                  </li>
                </ul>
                <div class="list-item">
                  <input class="activity-input" ng-change="printValue()" placeholder="Type your activities here!" type="text" ng-model="activity_input" ng-enter="addActivity()" ng-blur="addActivity()" />
                </div>
                <p class="repeat-alarm" ng-show="showRepeatAlarm">Name has to be unique!</p>
              </div>

            </div>
          </div>

          <div flex="75" flex-sm="100" class="max-height">
            <div  style="overflow: hidden;" class="body-container" >
              <div class="header-area">
                <h1 class="activity-header" ng-show="selected_activity_id != -1">{{ activities[findIndexById('activity', selected_activity_id)].title }}</h1></br>
                <h2 class="activity-header" ng-show="selected_activity_id != -1">To-dos</h2>
              </div>
              <div ng-show="selected_activity_id != -1" class="search-area">
                <input class="search_input" ng-enter="searchAssignment()" placeholder="Search..." ng-model="search_input" type="text" />
                <md-button ng-click="searchAssignment()">Search</md-button>
              </div>
              <div layout="row">
                <div class="flex-padding max-height" flex="100">
                  <div ng-show="selected_activity_id != -1">
                    <ul class="list-area">
                      <li ng-class="assignment.completedYn === 'Y' ? 'list-item completed' : 'list-item'" ng-repeat="assignment in assignments">
                        <span style="max-width: calc(100% - 230px);; overflow: hidden; text-overflow: ellipsis; display: inline-block; white-space: nowrap">{{ assignment.title }}</span>
                        <div ng-click="removeAssignment(assignment._id)" class="delete-activity"></div>
                        <div ng-click="setCompletedYn(assignment._id, assignment.completedYn)" ng-class="assignment.completedYn === 'Y' ? 'complete-activity-checked' : 'complete-activity'"></div>
                        <div class="datepicker-area">
                          <md-datepicker
                            ng-change="setAssignmentDueDate(assignment._id, $index)"
                            ng-model="assignment_due_dates[findDateById('assignment', assignment._id)].date"
                            md-placeholder="Enter date"
                            md-open-on-focus
                          >
                          </md-datepicker>
                        </div>
                      </li>

                    </ul>
                    <div ng-form name="assignmentInput" class="list-item">
                      <input
                        class="task-input"
                        placeholder="Type your assignments here!"
                        type="text"
                        ng-maxlength="80"
                        ng-model="assignment_input"
                        ng-enter="assignmentInput.$valid ? addAssignment() : null"
                        ng-blur="assignmentInput.$valid ? addAssignment() : null"
                      />
                    </div>
                    <p class="repeat-alarm" ng-show="!assignmentInput.$valid">Input content too long!</p>
                  </div>
                </div>
              </div>

            </div>
          </div>

      </div>
    </div>
  </body>
</html>
